<div class="notes-container-wrapper">
  <div class="notes-wrapper">
    <div class="notes-container" [@expandCollapse]="isExpanded ? 'expanded' : 'collapsed'"  [style.background-color]="selectedColor">

      <!-- Collapsed State -->
      <div class="note-input" *ngIf="!isExpanded">
        <input placeholder="Take a note..." readonly (click)="expandNote()" > <!-- Add click handler here -->
        <div class="quick-actions">
          <button mat-icon-button>
            <span class="material-icons-outlined">check_box</span>
          </button>
          <button mat-icon-button>
            <span class="material-icons-outlined">brush</span>
          </button>
          <button mat-icon-button>
            <span class="material-icons-outlined">image</span>
          </button>
        </div>
      </div>

      <!-- Expanded State -->
      <div class="note-expanded" *ngIf="isExpanded">
        <form [formGroup]="noteForm" >
          <input formControlName="Title" type="Title" placeholder="Title" [(ngModel)]="noteTitle" class="title-input">

          <textarea formControlName="Description" type="Description" placeholder="Take a note..."
            [(ngModel)]="noteContent" class="content-input" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="3" cdkAutosizeMaxRows="10" >
          </textarea>

          <div class="note-actions">
            <div class="left-actions">
              <!-- <app-icon-buttons></app-icon-buttons> -->
               
<button mat-icon-button matTooltip="Remind me">
  <span class="material-icons-outlined">notifications</span>
</button>
<button mat-icon-button matTooltip="Collaborator">
  <span class="material-icons-outlined">person_add</span>
</button>
<button mat-icon-button matTooltip="Background options" [matMenuTriggerFor]="paletteMenu">
  <span class="material-icons-outlined">palette</span>
</button>
<button mat-icon-button matTooltip="Add image">
  <span class="material-icons-outlined">image</span>
</button>
<button mat-icon-button matTooltip="Archive" >
  <span class="material-icons-outlined">archive</span>
</button>
<!-- More options menu -->
<!-- <mat-menu #menu="matMenu">
  <button mat-menu-item (click)="onDelete()">
    <span class="material-icons-outlined" >delete</span>
    <span>Delete</span>
  </button> -->
  <!-- <button mat-menu-item>
    <span class="material-icons-outlined">content_copy</span>
    <span>Duplicate</span>
  </button>
  <button mat-menu-item>
    <span class="material-icons-outlined">label</span>
    <span>Add label</span>
  </button> -->
<!-- </mat-menu> -->
<!-- 
More button triggering the menu
<button mat-icon-button [matMenuTriggerFor]="menu" matTooltip="More">
  <span class="material-icons-outlined">more_vert</span>
</button> -->

<mat-menu #paletteMenu="matMenu" class="colorpaletteMenu" panelClass="custom-palette-menu">
  <div class="color-container">
    <button class="colorIcon" *ngFor="let color of colorArray" 
      [style.background]="color.code" 
      (click)="SelectColor(color)">
    </button>
  </div>
</mat-menu>


              <button mat-icon-button matTooltip="Undo">
                <span class="material-icons-outlined">undo</span>
              </button>
              <button mat-icon-button matTooltip="Redo">
                <span class="material-icons-outlined">redo</span>
              </button>
            </div>

            <button mat-button type="submit" (click)="closeNote($event)">Close</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <mat-menu #menu="matMenu">
    <button mat-menu-item>
      <span class="material-icons-outlined">delete</span>
      <span>Delete note</span>
    </button>
    <button mat-menu-item>
      <span class="material-icons-outlined">label</span>
      <span>Add label</span>
    </button>
    <button mat-menu-item>
      <span class="material-icons-outlined">content_copy</span>
      <span>Make a copy</span>
    </button>
  </mat-menu>
</div>